<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cart | JhadJhadoli</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&family=Amita&display=swap" rel="stylesheet">
<style>
body { font-family: 'Merriweather', serif; }
.handwritten { font-family: 'Amita', cursive; }
</style>
</head>
<body class="bg-[#fdfaf3] text-gray-800">

<header class="bg-[#faf6ec] py-12 text-center shadow-inner">
  <h1 class="text-4xl handwritten text-[#3b3a28]">Your Cart ðŸ›’</h1>
</header>

<section class="container mx-auto px-6 py-12" id="cartSection">
</section>

<script>
let currentUser = JSON.parse(localStorage.getItem('currentUser'));
const cartSection = document.getElementById('cartSection');

if(!currentUser){
    cartSection.innerHTML = '<p class="text-center text-red-600">Please login to view your cart!</p>';
} else if(currentUser.cart.length === 0){
    cartSection.innerHTML = '<p class="text-center text-gray-700">Your cart is empty.</p>';
} else {
    let html = '<ul class="space-y-4">';
    currentUser.cart.forEach((item, index)=>{
        html += `<li class="bg-white p-4 rounded-lg shadow flex justify-between items-center">
        <span>${item.name} - â‚¹${item.price}</span>
        <button onclick="removeItem(${index})" class="px-3 py-1 bg-red-600 text-white rounded-lg hover:bg-red-700">Remove</button>
        </li>`;
    });
    html += '</ul>';
    cartSection.innerHTML = html;
}

function removeItem(index){
    currentUser.cart.splice(index,1);
    let users = JSON.parse(localStorage.getItem('users'));
    let userIndex = users.findIndex(u => u.email === currentUser.email);
    users[userIndex].cart = currentUser.cart;
    localStorage.setItem('users', JSON.stringify(users));
    localStorage.setItem('currentUser', JSON.stringify(currentUser));
    location.reload();
}
</script>


</body>
</html>
